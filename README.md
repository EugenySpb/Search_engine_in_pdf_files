# Поисковая система

Разработан класс поискового движка, который быстро находит указанное слово среди pdf-файлов и ранжирует результаты по количеству вхождений. Также реализован сервер, который обслуживает входящие запросы с помощью этого движка.

## Проект
В проекте имеются следующие классы:

| Класс                 | Описание                                                                                                                                                                                                           |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Main`                | В классе запускается сервер, обслуживающий поисковые запросы.                                                                                                                                                      |
| `PageEntry`           | Класс, описывает один элемент результата одного поиска. Он состоит из имени pdf-файла, номера страницы и количества раз, которое встретилось это слово на ней.                                                     |
| `SearchEngine`        | Интерфейс, описывающий поисковый движок.                                                                                                                                                                           |
| `BooleanSearchEngine` | Представляет собой поисковый движок для выполнения булевого поиска в индексированных документах без использования синонимов и прочих приёмов нечёткого поиска.                                                     |
| `Processor`           | Класс, который выполняет обработку данных: читает файл со стоп-словами (stop-ru.txt) и возвращает множество уникальных стоп-слов; обрабатывает файлы PDF, извлекая слова и распределяя их на страницах документов. |
| `Client`              | Клиент устанавливает соединение с сервером, отправляет запрос и выводит ответы сервера на консоль.                                                                                                                 |

## PDF
Для работы с PDF мы используем библиотеку `com.itextpdf:itext7-core:7.2.3`, которая подключена в `pom.xml`:

Основные инструменты из этой библиотеки выглядят следующим образом:

* Чтобы создать объект пдф-документа, нужно указать объект `File` этого документа следующим классам: `var doc = new PdfDocument(new PdfReader(pdf));`.
* Чтобы получить объект одной страницы документа, нужно вызвать `doc.getPage(номерСтраницы)`.
* Чтобы получить текст со страницы, используйте `var text = PdfTextExtractor.getTextFromPage(page);`.
* Чтобы разбить текст на слова (а они в этих документах разделены могут быть не только пробелами), используйте `var words = text.split("\\P{IsAlphabetic}+");`.

## Индексация и поиск
Здесь речь пойдёт о реализации класса `BooleanSearchEngine`. Мы хотим чтобы поиск (метод `search`) работал быстро, поэтому предпочтём сканирование всех pdf-файлов в конструкторе класса с сохранением информации для каждого слова из pdf-файлов. Тогда метод `search` сможет отрабатывать быстро, по сути возвращать уже посчитанный в конструкторе для слова готовый список-ответ. Т.е. в конструкторе для каждого слова нужно сохранить готовый на возможный будущий запрос ответ в виде `List<PageEntry>` (для этого можно использовать мапу, где ключом будет слово, а значением - искомый список). Такое предварительное сканирование файлов по которым мы будем искать называется _индексацией_.

В итоге мы реализовали логику индексации в конструкторе. Сканируя каждый пдф-файл мы перебрали его страницы, для каждой страницы извлекли из неё слова и подсчитали их количество. После подсчёта, для каждого уникального слова pdf-файла создали объект `PageEntry` и сохранили мапу в поле. Также мы реализовали регистронезависимый поиск, т.е. по слову "бизнес" учитываются и "бизнес", и "Бизнес" в документах (для этого при обработке каждое слово переводим в нижний регистр с помощью встроенного метода класса `String` для этих целей).

Также, списки ответов для каждого слова отсортированы в порядке уменьшения поля `count`. Для этого классу `PageEntry` реализовали интерфейс `Comparable`.

Дополнительно метод запроса принимает не слово, а полноценный запрос из нескольких слов.

Он всё также возвращает в качестве результата поиска список из `PageEntry`, только `count` в нём теперь содержит суммарное количество раз, которое встретилось любое из слов запроса.

При этом слова из списка [стоп-слов](https://github.com/Netology-cp/pcs-final-diplom/blob/main/stop-ru.txt) никак не влияют на запрос (т.е. игнорируются), т.к. их встречаемость в запросе никакой информационной нагрузки не несёт (в нашем булевом поиске).
## Сервер
После завершения работы над движком написали сервер. В `main` запускается сервер, слушающий порт `8989`, к которому приходят подключения и на входной поток подается одно слово (обозначено как `word`), отвечает результатом вызова метода `search(word)`, но в виде JSON-текста.
